{% extends "base.html" %}
{% load static %}

{% block title %}비밀번호 변경 - 마이페이지{% endblock %}

{% block content %}
<section class="section" style="position: relative; margin-top: 20px;">
    <div class="container" style="position: relative; min-height: 400px; margin-top: 0; max-width: 800px;">
        <div style="margin-bottom: 24px;">
            <a href="{% url 'accounts:profile_edit' %}" style="display: inline-flex; align-items: center; gap: 8px; color: var(--brand); text-decoration: none; font-weight: 600; margin-bottom: 16px;">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M19 12H5M12 19l-7-7 7-7"/>
                </svg>
                프로필 편집으로 돌아가기
            </a>
            <h1 style="font-size: 28px; font-weight: 700; margin: 0; color: var(--brand-800);">비밀번호 변경</h1>
        </div>

        <div style="background: #fff; border: 1px solid #e2e8f0; border-radius: 12px; padding: 32px;">
            {% if form.errors %}
                <div class="form-errors">
                    <strong>다음 오류를 수정해주세요:</strong>
                    <ul style="margin: 8px 0 0 0; padding-left: 20px;">
                        {% for field, errors in form.errors.items %}
                            {% for error in errors %}
                                <li>{{ field }}: {{ error }}</li>
                            {% endfor %}
                        {% endfor %}
                    </ul>
                </div>
            {% endif %}

            <form method="post">
                {% csrf_token %}
                
                <div class="form-field">
                    <label for="{{ form.old_password.id_for_label }}">현재 비밀번호 <span class="required">*</span></label>
                    {{ form.old_password }}
                    {% if form.old_password.errors %}
                        <p class="error-text">{{ form.old_password.errors.0 }}</p>
                    {% endif %}
                </div>

                <div class="form-field">
                    <label for="{{ form.new_password1.id_for_label }}">새 비밀번호 <span class="required">*</span></label>
                    {{ form.new_password1 }}
                    {% if form.new_password1.help_text %}
                        <p class="help-text">{{ form.new_password1.help_text }}</p>
                    {% endif %}
                    {% if form.new_password1.errors %}
                        <p class="error-text">{{ form.new_password1.errors.0 }}</p>
                    {% endif %}
                </div>

                <div class="form-field">
                    <label for="{{ form.new_password2.id_for_label }}">새 비밀번호 확인 <span class="required">*</span></label>
                    {{ form.new_password2 }}
                    {% if form.new_password2.errors %}
                        <p class="error-text">{{ form.new_password2.errors.0 }}</p>
                    {% endif %}
                </div>

                <div style="display: flex; gap: 12px; margin-top: 32px; flex-wrap: wrap;">
                    <button type="submit" class="btn btn-primary" style="flex: 1; min-width: 120px;">
                        비밀번호 변경
                    </button>
                    <a href="{% url 'accounts:profile_edit' %}" class="btn btn-ghost" style="flex: 1; min-width: 120px; text-align: center;">
                        취소
                    </a>
                </div>
            </form>
        </div>
    </div>
</section>
{% endblock %}
