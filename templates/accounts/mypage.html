{% extends "base.html" %}
{% load static %}

{% block title %}ë§ˆì´í˜ì´ì§€ - ë°°ë“œë¯¼í†¡{% endblock %}

{% block content %}
<section class="section" style="position: relative; margin-top: 20px;">
    <div class="container" style="position: relative; min-height: 400px; margin-top: 0; max-width: 800px;">
        <!-- í”„ë¡œí•„ ì„¹ì…˜ -->
        <div style="background: linear-gradient(135deg, #31AA60 0%, #279254 100%); border-radius: 16px; padding: 32px; margin-bottom: 32px; color: white;">
            <div style="display: flex; align-items: center; gap: 20px; flex-wrap: wrap;">
                <div style="position: relative;">
                    <img src="{{ user.profile_image_url }}" alt="{{ user.activity_name }} í”„ë¡œí•„" 
                         style="width: 80px; height: 80px; border-radius: 50%; object-fit: cover; border: 3px solid rgba(255,255,255,0.3);">
                                        </div>
                <div style="flex: 1; min-width: 200px;">
                    <h1 style="margin: 0 0 8px 0; font-size: 24px; font-weight: 700; color: white;">{{ user.activity_name }}</h1>
                    <p style="margin: 0 0 4px 0; font-size: 14px; color: rgba(255,255,255,0.9);">{{ user.email }}</p>
                    {% if user.date_joined %}
                    <p style="margin: 0; font-size: 13px; color: rgba(255,255,255,0.8);">ê°€ì…ì¼: {{ user.date_joined|date:"Yë…„ mì›” dì¼" }}</p>
                                    {% endif %}
                </div>
                <div>
                    <a href="{% url 'accounts:profile_edit' %}" class="btn" style="background: white; color: var(--brand); border: none;">
                        í”„ë¡œí•„ í¸ì§‘
                    </a>
                                    </div>
                                </div>
        </div>

        <!-- ë¦¬ìŠ¤íŠ¸ í˜•íƒœ ë©”ë‰´ -->
        <div style="background: #fff; border: 1px solid #e2e8f0; border-radius: 12px; overflow: hidden;">
            <!-- ëª¨ì„ -->
            <div style="border-bottom: 1px solid #e2e8f0;">
                <div style="padding: 16px 20px; background: var(--surface-2); border-bottom: 1px solid #e2e8f0;">
                    <h2 style="margin: 0; font-size: 18px; font-weight: 700; color: var(--brand-800);">ëª¨ì„</h2>
                </div>
                <a href="{% url 'accounts:mypage_bands' %}" style="display: flex; align-items: center; justify-content: space-between; padding: 16px 20px; text-decoration: none; color: inherit; border-bottom: 1px solid #f1f5f9; transition: background 0.2s ease;">
                    <div style="display: flex; align-items: center; gap: 12px;">
                        <span style="font-size: 20px;">ğŸ‘¥</span>
                        <span style="font-size: 16px; font-weight: 500; color: #1e293b;">ë‚´ ëª¨ì„</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: 12px;">
                        <span style="font-size: 14px; color: var(--muted);">{{ my_bands_count }}</span>
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: var(--muted);">
                            <path d="M9 18l6-6-6-6"/>
                        </svg>
                    </div>
                </a>
                <a href="{% url 'accounts:mypage_created_bands' %}" style="display: flex; align-items: center; justify-content: space-between; padding: 16px 20px; text-decoration: none; color: inherit; transition: background 0.2s ease;">
                    <div style="display: flex; align-items: center; gap: 12px;">
                        <span style="font-size: 20px;">âœ¨</span>
                        <span style="font-size: 16px; font-weight: 500; color: #1e293b;">ë‚´ê°€ ë§Œë“  ëª¨ì„</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: 12px;">
                        <span style="font-size: 14px; color: var(--muted);">{{ created_bands_count }}</span>
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: var(--muted);">
                            <path d="M9 18l6-6-6-6"/>
                        </svg>
                    </div>
                </a>
            </div>

            <!-- ëª¨ì„ í™œë™ ë‚´ì—­ -->
            <div style="border-bottom: 1px solid #e2e8f0;">
                <div style="padding: 16px 20px; background: var(--surface-2); border-bottom: 1px solid #e2e8f0;">
                    <h2 style="margin: 0; font-size: 18px; font-weight: 700; color: var(--brand-800);">ëª¨ì„ í™œë™ ë‚´ì—­</h2>
                </div>
                <a href="{% url 'accounts:mypage_band_posts' %}" style="display: flex; align-items: center; justify-content: space-between; padding: 16px 20px; text-decoration: none; color: inherit; border-bottom: 1px solid #f1f5f9; transition: background 0.2s ease;">
                    <div style="display: flex; align-items: center; gap: 12px;">
                        <span style="font-size: 20px;">ğŸ“</span>
                        <span style="font-size: 16px; font-weight: 500; color: #1e293b;">ê²Œì‹œê¸€</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: 12px;">
                        <span style="font-size: 14px; color: var(--muted);">{{ band_posts_count }}</span>
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: var(--muted);">
                            <path d="M9 18l6-6-6-6"/>
                        </svg>
                    </div>
                </a>
                <a href="{% url 'accounts:mypage_band_comments' %}" style="display: flex; align-items: center; justify-content: space-between; padding: 16px 20px; text-decoration: none; color: inherit; border-bottom: 1px solid #f1f5f9; transition: background 0.2s ease;">
                    <div style="display: flex; align-items: center; gap: 12px;">
                        <span style="font-size: 20px;">ğŸ’¬</span>
                        <span style="font-size: 16px; font-weight: 500; color: #1e293b;">ëŒ“ê¸€</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: 12px;">
                        <span style="font-size: 14px; color: var(--muted);">{{ band_comments_count }}</span>
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: var(--muted);">
                            <path d="M9 18l6-6-6-6"/>
                        </svg>
                    </div>
                </a>
                <a href="{% url 'accounts:mypage_schedule_applications' %}" style="display: flex; align-items: center; justify-content: space-between; padding: 16px 20px; text-decoration: none; color: inherit; transition: background 0.2s ease;">
                    <div style="display: flex; align-items: center; gap: 12px;">
                        <span style="font-size: 20px;">âš¡</span>
                        <span style="font-size: 16px; font-weight: 500; color: #1e293b;">ì°¸ì—¬í•œ ë²ˆê°œ</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: 12px;">
                        <span style="font-size: 14px; color: var(--muted);">{{ schedule_applications_count }}</span>
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: var(--muted);">
                            <path d="M9 18l6-6-6-6"/>
                        </svg>
                    </div>
                </a>
            </div>

            <!-- ì»¤ë®¤ë‹ˆí‹° í™œë™ -->
            <div style="border-bottom: 1px solid #e2e8f0;">
                <div style="padding: 16px 20px; background: var(--surface-2); border-bottom: 1px solid #e2e8f0;">
                    <h2 style="margin: 0; font-size: 18px; font-weight: 700; color: var(--brand-800);">ì»¤ë®¤ë‹ˆí‹° í™œë™</h2>
                </div>
                <a href="{% url 'accounts:mypage_community_posts' %}" style="display: flex; align-items: center; justify-content: space-between; padding: 16px 20px; text-decoration: none; color: inherit; border-bottom: 1px solid #f1f5f9; transition: background 0.2s ease;">
                    <div style="display: flex; align-items: center; gap: 12px;">
                        <span style="font-size: 20px;">ğŸ“</span>
                        <span style="font-size: 16px; font-weight: 500; color: #1e293b;">ê²Œì‹œê¸€</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: 12px;">
                        <span style="font-size: 14px; color: var(--muted);">{{ community_posts_count }}</span>
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: var(--muted);">
                            <path d="M9 18l6-6-6-6"/>
                        </svg>
                    </div>
                </a>
                <a href="{% url 'accounts:mypage_comments' %}" style="display: flex; align-items: center; justify-content: space-between; padding: 16px 20px; text-decoration: none; color: inherit; transition: background 0.2s ease;">
                    <div style="display: flex; align-items: center; gap: 12px;">
                        <span style="font-size: 20px;">ğŸ’¬</span>
                        <span style="font-size: 16px; font-weight: 500; color: #1e293b;">ëŒ“ê¸€</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: 12px;">
                        <span style="font-size: 14px; color: var(--muted);">{{ comments_count }}</span>
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: var(--muted);">
                            <path d="M9 18l6-6-6-6"/>
                        </svg>
                    </div>
                </a>
            </div>

            <!-- ëŒ€íšŒ -->
            <div style="border-bottom: 1px solid #e2e8f0;">
                <div style="padding: 16px 20px; background: var(--surface-2); border-bottom: 1px solid #e2e8f0;">
                    <h2 style="margin: 0; font-size: 18px; font-weight: 700; color: var(--brand-800);">ëŒ€íšŒ</h2>
                </div>
                <a href="{% url 'accounts:mypage_liked_contests' %}" style="display: flex; align-items: center; justify-content: space-between; padding: 16px 20px; text-decoration: none; color: inherit; transition: background 0.2s ease;">
                    <div style="display: flex; align-items: center; gap: 12px;">
                        <span style="font-size: 20px;">ğŸ†</span>
                        <span style="font-size: 16px; font-weight: 500; color: #1e293b;">ì¢‹ì•„ìš”í•œ ëŒ€íšŒ</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: 12px;">
                        <span style="font-size: 14px; color: var(--muted);">{{ liked_contests_count }}</span>
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: var(--muted);">
                            <path d="M9 18l6-6-6-6"/>
                        </svg>
                            </div>
                        </a>
            </div>

            <!-- ì„¤ì • -->
            <div style="border-bottom: 1px solid #e2e8f0;">
                <div style="padding: 16px 20px; background: var(--surface-2); border-bottom: 1px solid #e2e8f0;">
                    <h2 style="margin: 0; font-size: 18px; font-weight: 700; color: var(--brand-800);">ì„¤ì •</h2>
                </div>
                <a href="{% url 'accounts:notification_settings' %}" style="display: flex; align-items: center; justify-content: space-between; padding: 16px 20px; text-decoration: none; color: inherit; border-bottom: 1px solid #f1f5f9; transition: background 0.2s ease;">
                    <div style="display: flex; align-items: center; gap: 12px;">
                        <span style="font-size: 20px;">ğŸ””</span>
                        <span style="font-size: 16px; font-weight: 500; color: #1e293b;">ì•Œë¦¼ ì„¤ì •</span>
                    </div>
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: var(--muted);">
                        <path d="M9 18l6-6-6-6"/>
                    </svg>
                </a>
                <a href="{% url 'privacy' %}" style="display: flex; align-items: center; justify-content: space-between; padding: 16px 20px; text-decoration: none; color: inherit; border-bottom: 1px solid #f1f5f9; transition: background 0.2s ease;">
                    <div style="display: flex; align-items: center; gap: 12px;">
                        <span style="font-size: 20px;">ğŸ”’</span>
                        <span style="font-size: 16px; font-weight: 500; color: #1e293b;">ê°œì¸ì •ë³´ ì²˜ë¦¬ë°©ì¹¨</span>
                    </div>
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: var(--muted);">
                        <path d="M9 18l6-6-6-6"/>
                    </svg>
                </a>
                <a href="{% url 'terms' %}" style="display: flex; align-items: center; justify-content: space-between; padding: 16px 20px; text-decoration: none; color: inherit; border-bottom: 1px solid #f1f5f9; transition: background 0.2s ease;">
                    <div style="display: flex; align-items: center; gap: 12px;">
                        <span style="font-size: 20px;">ğŸ“‹</span>
                        <span style="font-size: 16px; font-weight: 500; color: #1e293b;">ì´ìš©ì•½ê´€</span>
                    </div>
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: var(--muted);">
                        <path d="M9 18l6-6-6-6"/>
                    </svg>
                </a>
                <a href="{% url 'accounts:inquiry_create' %}" style="display: flex; align-items: center; justify-content: space-between; padding: 16px 20px; text-decoration: none; color: inherit; border-bottom: 1px solid #f1f5f9; transition: background 0.2s ease;">
                    <div style="display: flex; align-items: center; gap: 12px;">
                        <span style="font-size: 20px;">ğŸ’¬</span>
                        <span style="font-size: 16px; font-weight: 500; color: #1e293b;">ë¬¸ì˜í•˜ê¸°</span>
                    </div>
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: var(--muted);">
                        <path d="M9 18l6-6-6-6"/>
                    </svg>
                </a>
                <a href="{% url 'accounts:inquiry_list' %}" style="display: flex; align-items: center; justify-content: space-between; padding: 16px 20px; text-decoration: none; color: inherit; transition: background 0.2s ease;">
                    <div style="display: flex; align-items: center; gap: 12px;">
                        <span style="font-size: 20px;">ğŸ“‹</span>
                        <span style="font-size: 16px; font-weight: 500; color: #1e293b;">ë¬¸ì˜ ë‚´ì—­</span>
                    </div>
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: var(--muted);">
                        <path d="M9 18l6-6-6-6"/>
                    </svg>
                </a>
            </div>

            <!-- ê´€ë¦¬ì ê¸°ëŠ¥ (staffë§Œ í‘œì‹œ) -->
            {% if user.is_staff %}
            <div style="border-bottom: 1px solid #e2e8f0;">
                <div style="padding: 16px 20px; background: var(--surface-2); border-bottom: 1px solid #e2e8f0;">
                    <h2 style="margin: 0; font-size: 18px; font-weight: 700; color: var(--brand-800);">ê´€ë¦¬ì ê¸°ëŠ¥</h2>
                </div>
                <a href="{% url 'accounts:signup' %}" style="display: flex; align-items: center; justify-content: space-between; padding: 16px 20px; text-decoration: none; color: inherit; transition: background 0.2s ease;">
                    <div style="display: flex; align-items: center; gap: 12px;">
                        <span style="font-size: 20px;">ğŸ‘¤</span>
                        <span style="font-size: 16px; font-weight: 500; color: #1e293b;">ê³„ì • ìƒì„±</span>
                    </div>
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: var(--muted);">
                        <path d="M9 18l6-6-6-6"/>
                    </svg>
                </a>
            </div>
            {% endif %}

            <!-- ì°¨ë‹¨ ê´€ë¦¬ -->
            <div>
                <div style="padding: 16px 20px; background: var(--surface-2); border-bottom: 1px solid #e2e8f0;">
                    <h2 style="margin: 0; font-size: 18px; font-weight: 700; color: var(--brand-800);">ì°¨ë‹¨ ê´€ë¦¬</h2>
                </div>
                <a href="{% url 'accounts:blocked_users' %}" style="display: flex; align-items: center; justify-content: space-between; padding: 16px 20px; text-decoration: none; color: inherit; border-bottom: 1px solid #f1f5f9; transition: background 0.2s ease;">
                    <div style="display: flex; align-items: center; gap: 12px;">
                        <span style="font-size: 20px;">ğŸš«</span>
                        <span style="font-size: 16px; font-weight: 500; color: #1e293b;">ì°¨ë‹¨í•œ ì‚¬ìš©ì</span>
                    </div>
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: var(--muted);">
                        <path d="M9 18l6-6-6-6"/>
                    </svg>
                </a>
                <a href="{% url 'accounts:report_list' %}" style="display: flex; align-items: center; justify-content: space-between; padding: 16px 20px; text-decoration: none; color: inherit; transition: background 0.2s ease;">
                    <div style="display: flex; align-items: center; gap: 12px;">
                        <span style="font-size: 20px;">âš ï¸</span>
                        <span style="font-size: 16px; font-weight: 500; color: #1e293b;">ì‹ ê³  ë‚´ì—­</span>
                    </div>
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: var(--muted);">
                        <path d="M9 18l6-6-6-6"/>
                    </svg>
                </a>
            </div>
        </div>
    </div>
</section>

<style>
@media (max-width: 768px) {
    .section > .container {
        padding: 16px;
    }
    
    /* í”„ë¡œí•„ ì„¹ì…˜ ëª¨ë°”ì¼ */
    .section > .container > div:first-child {
        padding: 24px 20px !important;
    }
    
    .section > .container > div:first-child > div {
        flex-direction: column;
        align-items: flex-start !important;
    }
    
    .section > .container > div:first-child img {
        width: 64px !important;
        height: 64px !important;
    }
    
    .section > .container > div:first-child h1 {
        font-size: 20px !important;
    }
    
    .section > .container > div:first-child > div:last-child {
        width: 100%;
        margin-top: 16px;
    }
    
    .section > .container > div:first-child > div:last-child .btn {
        width: 100%;
        justify-content: center;
    }
}

/* ë¦¬ìŠ¤íŠ¸ ì•„ì´í…œ í˜¸ë²„ íš¨ê³¼ */
a[href*="mypage"]:hover {
    background: var(--surface-2) !important;
}
</style>
{% endblock %}
