{% extends "admin/base_site.html" %}
{% load i18n admin_urls static %}

{% block extrastyle %}
{{ block.super }}
<style>
  .delete-confirmation-wrapper {
    max-width: 800px;
    margin: 20px auto;
  }

  .delete-warning {
    background: rgba(220, 38, 38, 0.08);
    border: 2px solid rgba(220, 38, 38, 0.3);
    border-radius: 12px;
    padding: 20px 24px;
    margin-bottom: 24px;
  }

  .delete-warning h2 {
    margin: 0 0 12px 0;
    color: #dc2626;
    font-size: 20px;
    font-weight: 800;
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .delete-warning h2::before {
    content: "⚠️";
    font-size: 24px;
  }

  .delete-warning p {
    margin: 8px 0;
    color: #b91c1c;
    font-weight: 600;
    line-height: 1.6;
  }

  .delete-info-card {
    background: linear-gradient(180deg, #ffffff 0%, #f9fdfb 100%);
    border: 1px solid rgba(15, 23, 42, 0.08);
    border-radius: 16px;
    padding: 20px 24px;
    margin-bottom: 24px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
  }

  .delete-info-card h3 {
    margin: 0 0 16px 0;
    color: var(--brand-800);
    font-size: 16px;
    font-weight: 700;
    padding-bottom: 10px;
    border-bottom: 2px solid var(--admin-border);
  }

  .delete-object-name {
    font-size: 18px;
    font-weight: 700;
    color: var(--text);
    padding: 12px 16px;
    background: var(--surface-2);
    border-radius: 8px;
    border-left: 4px solid var(--brand);
    margin-bottom: 16px;
  }

  .related-objects-list {
    background: var(--surface-2);
    border: 1px solid var(--admin-border);
    border-radius: 10px;
    padding: 16px;
    margin-top: 16px;
  }

  .related-objects-list h4 {
    margin: 0 0 12px 0;
    color: #dc2626;
    font-size: 15px;
    font-weight: 700;
  }

  .related-objects-list ul {
    margin: 8px 0;
    padding-left: 24px;
    color: var(--text);
  }

  .related-objects-list li {
    margin: 6px 0;
    line-height: 1.5;
  }

  .delete-actions {
    display: flex;
    gap: 12px;
    justify-content: flex-end;
    align-items: center;
    padding: 20px 24px;
    background: var(--surface-2);
    border-radius: 12px;
    border: 1px solid var(--admin-border);
  }

  .delete-actions input[type="submit"] {
    background: #dc2626;
    border: 0;
    padding: 12px 24px;
    font-size: 15px;
    font-weight: 700;
  }

  .delete-actions input[type="submit"]:hover {
    background: #b91c1c;
  }

  .delete-actions .cancel-link {
    padding: 12px 24px;
    background: var(--surface);
    border: 1px solid var(--admin-border);
    border-radius: 10px;
    color: var(--text);
    text-decoration: none;
    font-weight: 700;
    font-size: 15px;
    transition: background .2s ease, border-color .2s ease;
  }

  .delete-actions .cancel-link:hover {
    background: var(--surface-2);
    border-color: var(--brand);
    color: var(--brand);
  }
</style>
{% endblock %}

{% block breadcrumbs %}
<div class="breadcrumbs">
  <a href="{% url 'admin:index' %}">홈</a>
  &rsaquo; <a href="{% url 'admin:app_list' app_label=opts.app_label %}">{{ opts.app_config.verbose_name }}</a>
  &rsaquo; <a href="{% url opts|admin_urlname:'changelist' %}">{{ opts.verbose_name_plural|capfirst }}</a>
  &rsaquo; <a href="{% url opts|admin_urlname:'change' object.pk|admin_urlquote %}">{{ object|truncatewords:"18" }}</a>
  &rsaquo; 삭제
</div>
{% endblock %}

{% block content %}
<div class="delete-confirmation-wrapper">
  {% if perms_lacking %}
    <div class="delete-warning">
      <h2>권한 부족</h2>
      <p>다음 관련 객체를 삭제할 권한이 없습니다:</p>
    </div>
  {% endif %}

  <div class="delete-warning">
    <h2>정말 삭제하시겠습니까?</h2>
    <p>다음 객체와 관련된 모든 데이터가 <strong>영구적으로 삭제</strong>됩니다.</p>
    <p>이 작업은 <strong>되돌릴 수 없습니다</strong>.</p>
  </div>

  <div class="delete-info-card">
    <h3>삭제할 객체</h3>
    <div class="delete-object-name">
      {{ object }}
    </div>

    {% if deleted_objects %}
      <div class="related-objects-list">
        <h4>함께 삭제되는 관련 객체 ({{ deleted_objects|length }}개)</h4>
        {{ deleted_objects|unordered_list }}
      </div>
    {% endif %}
  </div>

  <form method="post">
    {% csrf_token %}
    <input type="hidden" name="post" value="yes">

    {% if is_popup %}
      <input type="hidden" name="{{ is_popup_var }}" value="1">
    {% endif %}

    {% if to_field %}
      <input type="hidden" name="{{ to_field_var }}" value="{{ to_field }}">
    {% endif %}

    <div class="delete-actions">
      <a href="../" class="cancel-link">취소</a>
      {% if perms_lacking %}
        <input type="submit" value="삭제할 수 없음" disabled class="button">
      {% else %}
        <input type="submit" value="네, 삭제하겠습니다" class="button">
      {% endif %}
    </div>
  </form>
</div>
{% endblock %}
