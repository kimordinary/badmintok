{% extends "admin/base_site.html" %}
{% load i18n static %}

{% block extrastyle %}
{{ block.super }}
<style>
  .password-change-wrapper {
    max-width: 600px;
    margin: 20px auto;
  }

  .password-card {
    background: linear-gradient(180deg, #ffffff 0%, #f9fdfb 100%);
    border: 1px solid rgba(15, 23, 42, 0.08);
    border-radius: 16px;
    padding: 28px 32px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
  }

  .password-card h1 {
    margin: 0 0 8px 0;
    font-size: 22px;
    font-weight: 800;
    color: var(--brand-800);
  }

  .password-card .help {
    margin: 0 0 24px 0;
    color: var(--muted);
    font-size: 14px;
    line-height: 1.6;
  }

  .password-info {
    background: rgba(59, 130, 246, 0.05);
    border-left: 3px solid rgba(59, 130, 246, 0.4);
    border-radius: 6px;
    padding: 12px 16px;
    margin-bottom: 24px;
  }

  .password-info p {
    margin: 6px 0;
    color: #475569;
    font-size: 14px;
    line-height: 1.5;
  }

  .password-info p:first-child {
    margin-top: 0;
  }

  .password-info p:last-child {
    margin-bottom: 0;
  }
</style>
{% endblock %}

{% block breadcrumbs %}
<div class="breadcrumbs">
  <a href="{% url 'admin:index' %}">홈</a>
  &rsaquo; <a href="{% url 'admin:auth_user_changelist' %}">사용자</a>
  &rsaquo; <a href="{% url 'admin:auth_user_change' original.pk|admin_urlquote %}">{{ original|truncatewords:"18" }}</a>
  &rsaquo; 비밀번호 변경
</div>
{% endblock %}

{% block content %}
<div class="password-change-wrapper">
  <div class="password-card">
    <h1>비밀번호 변경: {{ original.get_username }}</h1>
    <p class="help">이 폼을 사용하여 사용자의 비밀번호를 변경하세요.</p>

    {% if form.errors %}
      <ul class="errorlist">
        {% for field in form %}
          {% for error in field.errors %}
            <li>{{ field.label }}: {{ error }}</li>
          {% endfor %}
        {% endfor %}
        {% for error in form.non_field_errors %}
          <li>{{ error }}</li>
        {% endfor %}
      </ul>
    {% endif %}

    <div class="password-info">
      <p><strong>비밀번호 요구사항:</strong></p>
      <p>• 최소 8자 이상이어야 합니다.</p>
      <p>• 일반적으로 사용되는 비밀번호는 사용할 수 없습니다.</p>
      <p>• 숫자로만 이루어질 수 없습니다.</p>
      <p>• 사용자 정보와 유사하면 안 됩니다.</p>
    </div>

    <form method="post">
      {% csrf_token %}

      <input type="hidden" name="username" value="{{ original.get_username }}">

      {% for field in form %}
        <div class="form-row{% if field.errors %} errors{% endif %}">
          {{ field.errors }}
          <div>
            <label for="{{ field.id_for_label }}" class="required">{{ field.label }}:</label>
            {{ field }}
            {% if field.help_text %}
              <div class="help">{{ field.help_text|safe }}</div>
            {% endif %}
          </div>
        </div>
      {% endfor %}

      <div class="submit-row">
        <input type="submit" value="비밀번호 변경" class="button default">
        <a href="{% url 'admin:auth_user_change' original.pk|admin_urlquote %}" class="button cancel-link">취소</a>
      </div>
    </form>
  </div>
</div>
{% endblock %}
