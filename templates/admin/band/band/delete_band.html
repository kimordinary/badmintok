{% extends "admin/base_site.html" %}
{% load i18n admin_urls static %}

{% block breadcrumbs %}
<div class="breadcrumbs">
    <a href="{% url 'admin:index' %}">{% trans 'Home' %}</a>
    &rsaquo; <a href="{% url 'admin:app_list' app_label=opts.app_label %}">{{ opts.app_config.verbose_name }}</a>
    &rsaquo; <a href="{% url opts|admin_urlname:'changelist' %}">{{ opts.verbose_name_plural|capfirst }}</a>
    &rsaquo; {% trans 'Delete' %} {{ band.name }}
</div>
{% endblock %}

{% block content %}
<h1>모임 삭제 확인</h1>

<div style="margin: 20px 0; padding: 20px; background: #fff3cd; border: 1px solid #ffc107; border-radius: 4px;">
    <h2 style="margin-top: 0; color: #856404;">⚠️ 경고</h2>
    <p style="margin: 10px 0; font-size: 16px; color: #856404;">
        <strong>"{{ band.name }}"</strong> 모임을 삭제하시겠습니까?
    </p>
    <p style="margin: 10px 0; color: #856404;">
        이 작업은 되돌릴 수 없으며, 다음 데이터가 함께 삭제됩니다:
    </p>
    <ul style="margin: 10px 0; padding-left: 20px; color: #856404;">
        <li>멤버: <strong>{{ member_count }}명</strong></li>
        <li>게시글: <strong>{{ post_count }}개</strong></li>
        <li>일정: <strong>{{ schedule_count }}개</strong></li>
        <li>댓글, 좋아요, 투표 등 모든 관련 데이터</li>
    </ul>
</div>

<div style="margin: 20px 0;">
    <h3>모임 정보</h3>
    <table style="width: 100%; border-collapse: collapse;">
        <tr>
            <td style="padding: 8px; border: 1px solid #ddd; background: #f9f9f9; font-weight: bold; width: 150px;">모임 이름</td>
            <td style="padding: 8px; border: 1px solid #ddd;">{{ band.name }}</td>
        </tr>
        <tr>
            <td style="padding: 8px; border: 1px solid #ddd; background: #f9f9f9; font-weight: bold;">타입</td>
            <td style="padding: 8px; border: 1px solid #ddd;">{{ band.get_band_type_display }}</td>
        </tr>
        <tr>
            <td style="padding: 8px; border: 1px solid #ddd; background: #f9f9f9; font-weight: bold;">생성자</td>
            <td style="padding: 8px; border: 1px solid #ddd;">{{ band.created_by.activity_name }} ({{ band.created_by.email }})</td>
        </tr>
        <tr>
            <td style="padding: 8px; border: 1px solid #ddd; background: #f9f9f9; font-weight: bold;">생성일</td>
            <td style="padding: 8px; border: 1px solid #ddd;">{{ band.created_at|date:"Y-m-d H:i" }}</td>
        </tr>
        <tr>
            <td style="padding: 8px; border: 1px solid #ddd; background: #f9f9f9; font-weight: bold;">승인 상태</td>
            <td style="padding: 8px; border: 1px solid #ddd;">
                {% if band.is_approved %}
                    <span style="color: green;">✓ 승인됨</span>
                {% else %}
                    <span style="color: red;">✗ 승인 대기</span>
                {% endif %}
            </td>
        </tr>
    </table>
</div>

<form method="post" style="margin-top: 30px;">
    {% csrf_token %}
    <div style="display: flex; gap: 10px;">
        <input type="submit" value="삭제 확인" 
               style="padding: 10px 20px; background-color: #dc2626; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 14px; font-weight: bold;"
               onclick="return confirm('정말로 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다.');">
        <a href="{% url opts|admin_urlname:'changelist' %}" 
           style="padding: 10px 20px; background-color: #6b7280; color: white; border: none; border-radius: 4px; text-decoration: none; font-size: 14px; display: inline-block;">
            취소
        </a>
    </div>
</form>
{% endblock %}

